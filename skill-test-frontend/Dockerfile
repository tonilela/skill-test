FROM node:20

WORKDIR /app

COPY package*.json ./

RUN npm install --force

COPY . .

ARG REACT_APP_BACKEND_URL

ENV REACT_APP_BACKEND_URL $REACT_APP_BACKEND_URL
ARG REACT_APP_FRONTEND_PORT

ENV REACT_APP_FRONTEND_PORT $REACT_APP_FRONTEND_PORT

RUN npm run build

CMD ["npm", "start", "--", "$REACT_APP_FRONTEND_PORT"]
